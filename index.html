<!DOCTYPE html>
<html lang="ka">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TILO.LIFE - სიახლეების პორტალი</title>

    <!-- Open Graph / Discord Previews -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tilo.life/">
    <meta property="og:title" content="TILO.LIFE - სიახლეების პორტალი">
    <meta property="og:description" content="გაიგეთ უახლესი ამბები, ითამაშეთ და დააგროვეთ ქოინები თილოს სამყაროში!">
    <meta property="og:image"
        content="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=1200">
    <meta name="theme-color" content="#0066cc">
    <meta name="twitter:card" content="summary_large_image">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Outfit:wght@400;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="news.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="ratings.css">
    <script src="security.js"></script>
    <script src="https://kit.fontawesome.com/your-code.js" crossorigin="anonymous"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5131926411609590"
        crossorigin="anonymous"></script>
</head>

<body class="news-portal">


    <!-- Header -->
    <header class="news-header">
        <div class="header-container">
            <a href="index.html" class="logo-text">TILO<span>.LIFE</span></a>

            <nav class="nav-menu">
                <a href="#" class="nav-link active">მთავარი</a>
            </nav>

            <div class="auth-nav">
                <div id="user-profile-header" class="hidden"
                    style="display: flex; align-items: center; gap: 10px; cursor: pointer; position: relative;">
                    <span id="header-nickname"
                        style="font-weight: 800; color: var(--news-primary); font-size: 0.9rem;"></span>
                    <div id="profile-btn" class="profile-circle">U</div>

                    <!-- Dropdown -->
                    <div id="profile-dropdown" class="profile-dropdown">
                        <a href="profile.html" class="dropdown-item">👤 პროფილი</a>
                        <div class="dropdown-item" id="dark-mode-toggle">
                            <span>🌙 Dark Mode</span>
                            <div class="toggle-switch">
                                <input type="checkbox" id="dark-mode-checkbox">
                                <span class="slider"></span>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div id="nav-logout-btn" class="dropdown-item" style="color: var(--news-accent);">🔒 გასვლა
                        </div>
                    </div>
                </div>
                <button id="login-nav-btn" class="nav-link"
                    style="border: none; background: none; cursor: pointer; font-family: inherit;">🔐 შესვლა</button>
            </div>
        </div>
    </header>

    <div class="portal-container">
        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Mobile Abuse Slots (Independent, above hero) -->
            <div id="mobile-abuse-list" style="display: none;"></div>

            <!-- News Grid -->
            <div id="news-grid" class="news-grid" style="margin-top: 30px;">
                <!-- News cards injected here -->
                <p style="text-align: center; grid-column: 1/-1; padding: 50px; opacity: 0.5;">სიახლეები იტვირთება...
                </p>
            </div>

            <!-- Pagination -->
            <div id="pagination-container"
                style="display:flex; justify-content:center; align-items:center; gap:10px; margin:25px 0; flex-wrap:wrap;">
            </div>

            <!-- News Detail View (Hidden Initially) -->
            <div id="news-detail" class="hidden">
                <button onclick="showNewsList()" class="nav-link"
                    style="margin-bottom: 25px; border: none; background: none; cursor: pointer; padding: 0;">
                    ← უკან დაბრუნება
                </button>
                <div id="detail-content"></div>

                <!-- Like & Interaction Part -->
                <div class="interaction-bar"
                    style="margin-top: 30px; border-top: 1px solid var(--news-border); padding-top: 25px; display: flex; gap: 20px;">
                    <button id="like-btn"
                        style="border: 1px solid var(--news-border); background: var(--news-bg); color: var(--news-text); padding: 12px 25px; border-radius: 50px; cursor: pointer; font-weight: 700; transition: var(--transition);">
                        ❤️ <span id="like-count">0</span> მოწონება
                    </button>
                </div>

                <!-- Comments -->
                <section class="comment-section">
                    <h3>💬 კომენტარები</h3>
                    <div id="comment-form-container">
                        <textarea id="comment-input" class="comment-input"
                            placeholder="დაწერეთ თქვენი აზრი..."></textarea>
                        <button id="submit-comment-btn" class="hero-btn"
                            style="padding: 10px 25px; font-size: 0.9rem;">გაგზავნა</button>
                    </div>
                    <div id="comments-list" class="comment-list">
                        <!-- Comments injected here -->
                    </div>
                </section>
            </div>
        </main>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-title">💠 TOP 5 ADMIN ABUSE</div>
            <div id="sidebar-abuse-list" class="sidebar-list">
                <!-- Admin Abuse items injected here -->
            </div>

            <!-- Game Banner -->
            <a href="game.html"
                style="display:block; margin-top:20px; padding:18px; background:linear-gradient(135deg, #0f0c29, #302b63, #24243e); border:1px solid rgba(255,255,255,0.15); border-radius:16px; text-decoration:none; text-align:center; transition:all 0.3s; cursor:pointer; position:relative; overflow:hidden;"
                onmouseover="this.style.transform='scale(1.03)'; this.style.boxShadow='0 8px 30px rgba(100,100,255,0.3)'"
                onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">
                <div style="font-size:2rem; margin-bottom:6px;">🧼</div>
                <div style="color:#fff; font-weight:900; font-size:1rem;">TILO WORLD</div>
                <div style="color:rgba(255,255,255,0.6); font-size:0.75rem; margin-top:4px;">მოწმინდე ეკრანი!
                </div>
                <div
                    style="margin-top:10px; background:linear-gradient(135deg, #00c6ff, #0072ff); color:#fff; padding:8px 20px; border-radius:50px; display:inline-block; font-weight:800; font-size:0.8rem;">
                    თამაშის დაწყება 🎮</div>
            </a>

            <!-- Global Chat Sidebar -->
            <div class="sidebar-title" style="margin-top: 20px; background: linear-gradient(135deg, #00c6ff, #0072ff);">
                💬 გლობალური ჩატი</div>
            <div class="sidebar-list" style="padding: 15px; height: 400px; display: flex; flex-direction: column;">
                <div id="chat-messages"
                    style="flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; padding-right: 5px;">
                    <p style="text-align: center; opacity: 0.5; font-size: 0.8rem;">იტვირთება...</p>
                </div>
                <div style="display: flex; gap: 5px;">
                    <input type="text" id="chat-input" placeholder="მესიჯი..." maxlength="50"
                        style="flex: 1; padding: 8px; border-radius: 8px; border: 1px solid var(--news-border); background: var(--news-bg); color: var(--news-text);">
                    <button id="send-chat-btn"
                        style="background: var(--news-primary); color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer;">➤</button>
                </div>
            </div>
        </aside>
    </div>

    <!-- Floating Game Button (Mobile Only) -->
    <a href="game.html" class="floating-game-btn" style="display:none;">🧼</a>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content glass" style="max-width: 400px;">
            <span class="close-modal" id="close-auth">&times;</span>
            <div id="auth-mode-toggle" style="display: flex; gap: 10px; margin-bottom: 25px;">
                <button id="show-login-btn" class="action-btn">შესვლა</button>
                <button id="show-register-btn" class="action-btn second-btn">რეგისტრაცია</button>
            </div>
            <h2 id="auth-title">ავტორიზაცია</h2>
            <div style="margin-top: 25px;">
                <div id="nick-field" class="auth-field hidden">
                    <input type="text" id="nickname-input" placeholder="ნიკნეიმი" maxlength="15">
                </div>
                <div class="auth-field">
                    <input type="text" id="auth-email" placeholder="ელ-ფოსტა">
                </div>
                <div class="auth-field">
                    <input type="password" id="auth-password" placeholder="პაროლი">
                </div>
                <div id="forgot-password-container" style="text-align: right; margin-bottom: 10px;">
                    <a href="#" id="forgot-password-link"
                        style="font-size: 0.8rem; color: var(--news-primary); text-decoration: none;">პაროლის
                        აღდგენა?</a>
                </div>
                <button id="auth-submit-btn" class="action-btn" style="width: 100%; margin-top: 20px;">შესვლა</button>
            </div>
        </div>
    </div>

    <!-- User Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content glass" style="max-width: 500px; background: rgba(255,255,255,0.98); color: #222;">
            <span class="close-modal" id="close-settings" style="color: #000;">&times;</span>
            <h2>👤 პროფილის რედაქტირება</h2>
            <div id="profile-edit-form" style="margin-top: 20px;">
                <div class="auth-field">
                    <label>ნიკნეიმი:</label>
                    <input type="text" id="edit-nick" style="background: #eee; color: #000;">
                </div>
                <button id="update-profile-btn" class="action-btn"
                    style="background: var(--news-primary); margin-top: 15px;">შენახვა</button>
                <button id="logout-btn" class="action-btn second-btn" style="margin-top: 20px;">გასვლა</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="news-footer">
        <div class="footer-container">
            <h2 class="logo-text">TILO<span>.LIFE</span></h2>
            <p style="opacity: 0.6; margin-top: 10px;">ყველა უფლება დაცულია &copy; 2024</p>

            <div class="footer-counters">
                <!-- TOP.GE ASYNC COUNTER CODE -->
                <div id="top-ge-counter-container" data-site-id="118538"></div>
                <script async src="//counter.top.ge/counter.js"></script>
                <!-- / END OF TOP.GE COUNTER CODE -->

                <!-- WAUST.AT COUNTER CODE -->
                <script
                    id="_wau3mz">var _wau = _wau || []; _wau.push(["dynamic", "rcj6goig4h", "3mz", "c4302bffffff", "small"]);</script>
                <script async src="//waust.at/d.js"></script>
                <!-- / END OF WAUST.AT COUNTER CODE -->
            </div>
        </div>
    </footer>

    <!-- Video Notification Popup -->
    <div id="video-notification" class="hidden"
        style="position: fixed; top: 20px; left: 20px; width: 280px; background: rgba(16, 16, 30, 0.95); border: 2px solid cyan; border-radius: 12px; padding: 12px; z-index: 10000; box-shadow: 0 0 20px rgba(0, 255, 255, 0.3); backdrop-filter: blur(5px); transform: translateX(-150%); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <h3 style="margin: 0; color: cyan; font-size: 0.9rem; animation: glow 2s infinite;">✨ ახალი ვიდეო!</h3>
            <button onclick="hideVideoPopup()"
                style="background: none; border: none; color: #fff; font-size: 1.2rem; cursor: pointer;">&times;</button>
        </div>

        <div onclick="watchVideoHere(event)"
            style="position: relative; overflow: hidden; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 8px; cursor: pointer;">
            <img id="video-thumb" src="" alt="Thumbnail"
                style="width: 100%; height: auto; display: block; filter: brightness(0.8);">
            <div
                style="position: absolute; inset: 0; background: rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center;">
                <div
                    style="width: 40px; height: 40px; background: rgba(255,0,0,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    ▶️</div>
            </div>
        </div>
        <div id="video-notif-title"
            style="font-size: 0.8rem; font-weight: bold; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: white;">
            Loading...</div>

        <div style="display: flex; gap: 5px; margin-top: 5px;">
            <button id="btn-watch-here" onclick="watchVideoHere(event)"
                style="flex: 1; background: rgba(0, 255, 255, 0.2); color: cyan; border: 1px solid cyan; border-radius: 5px; cursor: pointer; padding: 6px; font-weight: bold; font-size: 0.75rem; transition: 0.3s;">აქ
                ვუყურებ 👁️</button>
            <a id="btn-youtube" href="#" target="_blank"
                style="flex: 1; display: flex; align-items: center; justify-content: center; background: rgba(255, 0, 0, 0.8); color: white; border: none; border-radius: 5px; text-decoration: none; font-size: 0.75rem; padding: 6px; font-weight: bold;">YouTube
                ↗️</a>
        </div>
    </div>

    <!-- Mini Video Player (Draggable & Resizable) -->
    <div id="video-player-modal" class="hidden"
        style="position: fixed; bottom: 20px; right: 20px; width: 380px; max-width: 90vw; z-index: 20000; box-shadow: 0 10px 40px rgba(0,0,0,0.8); background: black; border: 2px solid cyan; border-radius: 12px; overflow: visible; display: flex; flex-direction: column;">

        <!-- Drag Handle -->
        <div id="video-player-handle"
            style="height: 30px; background: rgba(0,0,0,0.9); cursor: move; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; border-bottom: 1px solid rgba(0,255,255,0.3); border-top-left-radius: 10px; border-top-right-radius: 10px;">
            <span
                style="font-size: 0.7rem; color: cyan; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">📺
                TILO VIDEO PLAYER</span>
            <button onclick="closeVideoPlayer()"
                style="background: rgba(255,0,0,0.8); color: white; border: none; width: 20px; height: 20px; border-radius: 4px; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; font-size: 12px;">&times;</button>
        </div>

        <div style="position: relative; flex: 1; min-height: 0; display: flex; flex-direction: column;">
            <div style="position: relative; padding-bottom: 56.25%; height: 0; flex: 1;">
                <iframe id="video-iframe" src=""
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                    allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>

            <!-- Resize Handle -->
            <div id="video-player-resizer"
                style="position: absolute; bottom: 0; right: 0; width: 20px; height: 20px; cursor: nwse-resize; z-index: 20020; display: flex; align-items: flex-end; justify-content: flex-end; padding: 2px;">
                <div style="width: 10px; height: 10px; border-right: 2px solid cyan; border-bottom: 2px solid cyan;">
                </div>
            </div>
        </div>

        <div
            style="text-align: center; background: rgba(0,0,0,0.8); border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; padding: 2px 0;">
            <span style="color: cyan; font-size: 0.6rem; font-weight: bold; opacity: 0.8;">ვიდეო უკრავს...</span>
        </div>
    </div>

    <!-- Footer -->
    <footer
        style="text-align:center; padding:30px 20px; margin-top:40px; border-top:1px solid var(--news-border); font-size:0.8rem; opacity:0.6; color:var(--news-text);">
        <p>© 2026 TILO.LIFE — ყველა უფლება დაცულია</p>
        <div style="margin-top:8px; display:flex; justify-content:center; gap:20px; flex-wrap:wrap;">
            <a href="privacy.html" style="color:var(--news-primary); text-decoration:none;">🔒 კონფიდენციალურობა</a>
            <a href="about.html" style="color:var(--news-primary); text-decoration:none;">🌐 ჩვენ შესახებ</a>
            <a href="mailto:contact@tilo.life" style="color:var(--news-primary); text-decoration:none;">📧 კონტაქტი</a>
        </div>
    </footer>

    <script type="module" src="portal.js"></script>
</body>

</html>